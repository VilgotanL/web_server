<!DOCTYPE html>
<!-- yas -->
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
        <title>VilgotanL's Website</title>

        <link rel="stylesheet" type="text/css" href="../../doc_style.css">
	</head>
    <body>
        <h1>Rust Brainf**k Interpreter</h1>
        <textarea id="code" spellcheck="false">Code here</textarea>
        <button id="run_btn">Run</button>
        <textarea id="output" spellcheck="false">Output here</textarea>

        <script>
            const runBtn = document.getElementById("run_btn");
            const codeEl = document.getElementById("code");
            const outputEl = document.getElementById("output");

            codeEl.value = `[
	99 bottles of beer by VilgotanL
	transpiled from VBF
	2021-06-15
]

>>++++++++++[->>+<<<<++++++++++>>]+++++++++>>-<<<<-[>>>>[->+>>+<<<]>[-<+>]>>[[-]<<<+++++++++++++++++
+++++++++++++++++++++++++++++++.------------------------------------------------>>>]<<<<<+++++++++++
+++++++++++++++++++++++++++++++++++++.------------------------------------------------>>>>>>++++[-<<
++++++++>>]<<.>>++++++[-<<+++++++++++>>]<<.+++++++++++++.+++++..--------.-------.[-]<<<<<<-[->+>>+<<
<]>[-<+>]>>[[-]>>>>>+++++++++[-<<+++++++++++++>>]<<--.[-]<<<]<<<+>>>>>>>>++++[-<<++++++++>>]<<.>>+++
+++[-<<+++++++++++++>>]<<+.---------.[-]>>++++[-<<++++++++>>]<<.>>++++++[-<<+++++++++++>>]<<.+++..++
+++++++++++.[-]>>++++[-<<++++++++>>]<<.>>++++++[-<<+++++++++++++>>]<<+.-.[-]>>++++[-<<++++++++>>]<<.
>>++++++[-<<++++++++++++++>>]<<.------------.---.[-]>>++++[-<<++++++++>>]<<.>>++++++++[-<<++++++++++
+>>]<<-.>>++++[-<<----->>]<<--.+++++++++++..[-]>>++++[-<<+++++++++++>>]<<.[-]++++++++++.[-]<<[->+>>+
<<<]>[-<+>]>>[[-]<<<++++++++++++++++++++++++++++++++++++++++++++++++.-------------------------------
----------------->>>]<<<<<++++++++++++++++++++++++++++++++++++++++++++++++.-------------------------
----------------------->>>>>>++++[-<<++++++++>>]<<.>>++++++[-<<+++++++++++>>]<<.+++++++++++++.+++++.
.--------.-------.[-]<<<<<<-[->+>>+<<<]>[-<+>]>>[[-]>>>>>+++++++++[-<<+++++++++++++>>]<<--.[-]<<<]<<
<+>>>>>>>>++++[-<<++++++++>>]<<.>>++++++[-<<+++++++++++++>>]<<+.---------.[-]>>++++[-<<++++++++>>]<<
.>>++++++[-<<+++++++++++>>]<<.+++..+++++++++++++.[-]>>+++++[-<<+++++++++>>]<<+.[-]++++++++++.>>+++++
[-<<+++++++++++++++>>]<<-.+++++++++++++.++++++++++.------.[-]>>++++[-<<++++++++>>]<<.>>++++++[-<<+++
++++++++++>>]<<+.-.---------.[-]>>++++[-<<++++++++>>]<<.>>++++++[-<<+++++++++++>>]<<++.+++++++++++.+
+++++++.---------.[-]>>++++[-<<+++++++++++>>]<<.------------.>>++++++++[-<<++++++++++>>]<<.---------
------.>>++++[-<<++++>>]<<++..[-]>>++++[-<<++++++++>>]<<.>>++++++[-<<++++++++++++>>]<<+.+++++++++++.
[-]>>++++[-<<++++++++>>]<<.>>+++++[-<<+++++++++++++>>]<<.>>++++[-<<++++>>]<<+.---.++++++.-------.---
-------.[-]>>++++[-<<+++++++++++>>]<<.[-]++++++++++.[-]<<<<<<->>[->+>>+<<<]>>>[-<<<+>>>]+<<[[-]>>-<<
]>>[-<<<++++++++++>>->]<<<-<<[->+>>+<<<]>[-<+>]>>[[-]>[->+>>+<<<]>[-<+>]>>[[-]<<<+++++++++++++++++++
+++++++++++++++++++++++++++++.------------------------------------------------>>>]<<<<<+++++++++++++
+++++++++++++++++++++++++++++++++++.------------------------------------------------>]<<<[->+>>+<<<]
>>>[-<<<+>>>]+<<[[-]>>-<<]>>[->>>>>++++++[-<<+++++++++++++>>]<<.>>++++[-<<++++++++>>]<<+.[-]<<<]>>>>
>++++[-<<++++++++>>]<<.>>++++++[-<<+++++++++++>>]<<.+++++++++++++.+++++..--------.-------.[-]<<<<<<-
[->+>>+<<<]>[-<+>]>>[[-]>>>>>+++++++++[-<<+++++++++++++>>]<<--.[-]<<<]<<<+>>>>>>>>++++[-<<++++++++>>
]<<.>>++++++[-<<+++++++++++++>>]<<+.---------.[-]>>++++[-<<++++++++>>]<<.>>++++++[-<<+++++++++++>>]<
<.+++..+++++++++++++.[-]>>++++[-<<++++++++>>]<<.>>++++++[-<<+++++++++++++>>]<<+.-.[-]>>++++[-<<+++++
+++>>]<<.>>++++++[-<<++++++++++++++>>]<<.------------.---.[-]>>++++[-<<++++++++>>]<<.>>++++++++[-<<+
++++++++++>>]<<-.>>++++[-<<----->>]<<--.+++++++++++..[-]>>+++++[-<<+++++++++>>]<<+.[-]<<<<<<[->+>>+<
<<]>[-<+>]>>[[-]>>>++++++++++..[-]<<<]<<<]`;

            runBtn.addEventListener("click", async function() {
                outputEl.value = "";
                let code = codeEl.value;

                function output(str) {
                    outputEl.value += str;
                }
                
                let worker = new Worker("./worker.js");

                worker.addEventListener("message", function handler({data}) {
                    if(data.done) {
                        worker.removeEventListener("message", handler);
                    } else if(data.getchar) {
                        worker.postMessage({"input": input()});
                    } else {
                        output(data.out);
                        outputEl.scrollTop = outputEl.scrollHeight;
                    }
                });
                worker.addEventListener("messageerror", console.log);
                worker.addEventListener("error", console.log);

                let input = "";
                if(code.includes(",")) {
                    input = prompt("Enter input:") || "";
                }
                worker.postMessage({"code": code, input});
            });
        </script>
    </body>
</html>
